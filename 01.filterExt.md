```
uint32_t MTPStorage::Create(uint32_t store, uint32_t parent, bool folder, const char *filename)
{
	DBGPrintf("MTPStorage::create(%u, %u, %u, %s)\n", store, parent, folder, filename);
	uint32_t ret;
	if ((parent == 0xFFFFUL) || (parent == 0xFFFFFFFFUL)) parent = store;  // does this ever get used?
	ScanDir(store, parent); // make sure the parent is scanned...
	Record p = ReadIndexRecord(parent);
	Record r;
	// 🔐 확장자 필터 시작
	if (!folder) {
		const char* allowed_exts[] = { ".doc", ".hwp", ".txt", ".c" };
		bool allowed = false;
		size_t len_file = strlen(filename);

		for (int i = 0; i < 4; i++) {
			const char* ext = allowed_exts[i];
			size_t len_ext = strlen(ext);
			if (len_file >= len_ext && strcasecmp(filename + len_file - len_ext, ext) == 0) {
				allowed = true;
				break;
			}
		}

		if (!allowed) {
			Serial.print("⛔ Blocked file (disallowed extension): ");
			Serial.println(filename);
			return 0; // 또는 적절한 MTP 에러 코드 반환
		}
	}
	// 🔐 확장자 필터 끝
	// See if the name already exists in the parent
	uint32_t index = p.child;
	while (index) {
```
